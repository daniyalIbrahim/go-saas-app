{"remainingRequest":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/src/views/ForgotPassword.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/src/views/ForgotPassword.vue","mtime":1599693140000},{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/babel-loader/lib/index.js","mtime":1610669667321},{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/ts-loader/index.js","mtime":1610669671571},{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/vuetify-loader/lib/loader.js","mtime":1610669687221},{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/cache-loader/dist/cjs.js","mtime":1610669676038},{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/vue-loader/lib/index.js","mtime":1610669676734}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\n\nimport Alert from '../components/Alert.vue';\nimport EmailTextField from '../components/EmailTextField.vue';\nimport { API_ENDPOINT } from '../constants';\n\n@Component({\n  components: {\n    Alert,\n    EmailTextField,\n  },\n})\nexport default class ForgotPassword extends Vue {\n  private email: string = '';\n  private loading: boolean = false;\n  private success: string = '';\n  private error: string = '';\n\n  private async resetPassword() {\n    if ((this.$refs.form as HTMLFormElement).validate()) {\n      this.error = '';\n      this.success = '';\n      this.loading = true;\n\n      try {\n        const response = await fetch(API_ENDPOINT + '/api/v1/account/password', {\n          body: JSON.stringify({\n            email: this.email,\n          }),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n          },\n          method: 'post',\n        });\n\n        const json = await response.json();\n\n        if (response.status >= 200 && response.status < 300) {\n          this.success = 'We have send you an email to reset your password.';\n          this.loading = false;\n        } else {\n          if (json.error) {\n            this.error = json.message;\n            this.loading = false;\n          }\n        }\n      } catch (e) {\n        this.error = 'An error occured';\n        this.loading = false;\n      }\n    }\n  }\n}\n",{"version":3,"sources":["ForgotPassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ForgotPassword.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container fluid fill-height>\n    <v-layout align-center justify-center>\n      <v-flex xs12 sm8 md4>\n        <v-card class=\"elevation-12\">\n          <v-toolbar dark color=\"primary\">\n            <v-toolbar-title>Forgot password</v-toolbar-title>\n            <v-spacer></v-spacer>\n          </v-toolbar>\n          <v-card-text>\n            <v-form ref=\"form\">\n              <EmailTextField v-model=\"email\" />\n              <Alert v-model=\"success\" type=\"success\" />\n              <Alert v-model=\"error\" type=\"error\" />\n            </v-form>\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"primary\" :loading=\"loading\" :disabled=\"loading\" @click=\"resetPassword\">Reset password</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue } from 'vue-property-decorator';\n\nimport Alert from '../components/Alert.vue';\nimport EmailTextField from '../components/EmailTextField.vue';\nimport { API_ENDPOINT } from '../constants';\n\n@Component({\n  components: {\n    Alert,\n    EmailTextField,\n  },\n})\nexport default class ForgotPassword extends Vue {\n  private email: string = '';\n  private loading: boolean = false;\n  private success: string = '';\n  private error: string = '';\n\n  private async resetPassword() {\n    if ((this.$refs.form as HTMLFormElement).validate()) {\n      this.error = '';\n      this.success = '';\n      this.loading = true;\n\n      try {\n        const response = await fetch(API_ENDPOINT + '/api/v1/account/password', {\n          body: JSON.stringify({\n            email: this.email,\n          }),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n          },\n          method: 'post',\n        });\n\n        const json = await response.json();\n\n        if (response.status >= 200 && response.status < 300) {\n          this.success = 'We have send you an email to reset your password.';\n          this.loading = false;\n        } else {\n          if (json.error) {\n            this.error = json.message;\n            this.loading = false;\n          }\n        }\n      } catch (e) {\n        this.error = 'An error occured';\n        this.loading = false;\n      }\n    }\n  }\n}\n</script>\n"]}]}