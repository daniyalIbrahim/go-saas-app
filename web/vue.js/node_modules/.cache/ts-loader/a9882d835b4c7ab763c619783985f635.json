{"remainingRequest":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/thread-loader/dist/cjs.js!/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/babel-loader/lib/index.js!/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/ts-loader/index.js??ref--13-3!/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/vuetify-loader/lib/loader.js!/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/src/views/ForgotPassword.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/src/views/ForgotPassword.vue","mtime":1599693140000},{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/cache-loader/dist/cjs.js","mtime":1610669676038},{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/thread-loader/dist/cjs.js","mtime":1610669676723},{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/babel-loader/lib/index.js","mtime":1610669667321},{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/ts-loader/index.js","mtime":1610669671571},{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/vuetify-loader/lib/loader.js","mtime":1610669687221},{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/cache-loader/dist/cjs.js","mtime":1610669676038},{"path":"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/vue-loader/lib/index.js","mtime":1610669676734}],"contextDependencies":[],"result":["import _JSON$stringify from \"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Vue } from 'vue-property-decorator';\nimport Alert from '../components/Alert.vue';\nimport EmailTextField from '../components/EmailTextField.vue';\nimport { API_ENDPOINT } from '../constants';\n\nvar ForgotPassword =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(ForgotPassword, _Vue);\n\n  function ForgotPassword() {\n    var _this;\n\n    _classCallCheck(this, ForgotPassword);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ForgotPassword).apply(this, arguments));\n    _this.email = '';\n    _this.loading = false;\n    _this.success = '';\n    _this.error = '';\n    return _this;\n  }\n\n  _createClass(ForgotPassword, [{\n    key: \"resetPassword\",\n    value: function () {\n      var _resetPassword = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var response, json;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.$refs.form.validate()) {\n                  _context.next = 18;\n                  break;\n                }\n\n                this.error = '';\n                this.success = '';\n                this.loading = true;\n                _context.prev = 4;\n                _context.next = 7;\n                return fetch(API_ENDPOINT + '/api/v1/account/password', {\n                  body: _JSON$stringify({\n                    email: this.email\n                  }),\n                  headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                  },\n                  method: 'post'\n                });\n\n              case 7:\n                response = _context.sent;\n                _context.next = 10;\n                return response.json();\n\n              case 10:\n                json = _context.sent;\n\n                if (response.status >= 200 && response.status < 300) {\n                  this.success = 'We have send you an email to reset your password.';\n                  this.loading = false;\n                } else {\n                  if (json.error) {\n                    this.error = json.message;\n                    this.loading = false;\n                  }\n                }\n\n                _context.next = 18;\n                break;\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](4);\n                this.error = 'An error occured';\n                this.loading = false;\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[4, 14]]);\n      }));\n\n      function resetPassword() {\n        return _resetPassword.apply(this, arguments);\n      }\n\n      return resetPassword;\n    }()\n  }]);\n\n  return ForgotPassword;\n}(Vue);\n\nForgotPassword = tslib_1.__decorate([Component({\n  components: {\n    Alert: Alert,\n    EmailTextField: EmailTextField\n  }\n})], ForgotPassword);\nexport default ForgotPassword;",{"version":3,"sources":["/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/vuetify-loader/lib/loader.js!/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/daniyalibrahim/go/src/github.com/daniyalibrahim/go-saas-app/web/vue.js/src/views/ForgotPassword.vue?vue&type=script&lang=ts&"],"names":[],"mappings":";;;;;;;;;;;;AA2BA,SAAS,SAAT,EAAoB,GAApB,QAA+B,wBAA/B;AAEA,OAAO,KAAP,MAAkB,yBAAlB;AACA,OAAO,cAAP,MAA2B,kCAA3B;AACA,SAAS,YAAT,QAA6B,cAA7B;;AAQA,IAAqB,cAArB;AAAA;AAAA;AAAA;;AANA,4BAAA;AAAA;;AAAA;;;AAOU,UAAA,KAAA,GAAgB,EAAhB;AACA,UAAA,OAAA,GAAmB,KAAnB;AACA,UAAA,OAAA,GAAkB,EAAlB;AACA,UAAA,KAAA,GAAgB,EAAhB;AAVV;AA+CC;;AAzCD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAOS,KAAK,KAAL,CAAW,IAAX,CAAoC,QAApC,EAPT;AAAA;AAAA;AAAA;;AAQM,qBAAK,KAAL,GAAa,EAAb;AACA,qBAAK,OAAL,GAAe,EAAf;AACA,qBAAK,OAAL,GAAe,IAAf;AAVN;AAAA;AAAA,uBAa+B,KAAK,CAAC,YAAY,GAAG,0BAAhB,EAA4C;AACtE,kBAAA,IAAI,EAAE,gBAAe;AACnB,oBAAA,KAAK,EAAE,KAAK;AADO,mBAAf,CADgE;AAItE,kBAAA,OAAO,EAAE;AACP,8BAAU,kBADH;AAEP,oCAAgB;AAFT,mBAJ6D;AAQtE,kBAAA,MAAM,EAAE;AAR8D,iBAA5C,CAbpC;;AAAA;AAac,gBAAA,QAbd;AAAA;AAAA,uBAwB2B,QAAQ,CAAC,IAAT,EAxB3B;;AAAA;AAwBc,gBAAA,IAxBd;;AA0BQ,oBAAI,QAAQ,CAAC,MAAT,IAAmB,GAAnB,IAA0B,QAAQ,CAAC,MAAT,GAAkB,GAAhD,EAAqD;AACnD,uBAAK,OAAL,GAAe,mDAAf;AACA,uBAAK,OAAL,GAAe,KAAf;AACD,iBAHD,MAGO;AACL,sBAAI,IAAI,CAAC,KAAT,EAAgB;AACd,yBAAK,KAAL,GAAa,IAAI,CAAC,OAAlB;AACA,yBAAK,OAAL,GAAe,KAAf;AACD;AACF;;AAlCT;AAAA;;AAAA;AAAA;AAAA;AAoCQ,qBAAK,KAAL,GAAa,kBAAb;AACA,qBAAK,OAAL,GAAe,KAAf;;AArCR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,EAA4C,GAA5C,CAAA;;AAAqB,cAAc,GAAA,OAAA,CAAA,UAAA,CAAA,CANlC,SAAS,CAAC;AACT,EAAA,UAAU,EAAE;AACV,IAAA,KAAK,EAAL,KADU;AAEV,IAAA,cAAc,EAAd;AAFU;AADH,CAAD,CAMyB,CAAA,EAAd,cAAc,CAAd;eAAA,c","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\n\nimport Alert from '../components/Alert.vue';\nimport EmailTextField from '../components/EmailTextField.vue';\nimport { API_ENDPOINT } from '../constants';\n\n@Component({\n  components: {\n    Alert,\n    EmailTextField,\n  },\n})\nexport default class ForgotPassword extends Vue {\n  private email: string = '';\n  private loading: boolean = false;\n  private success: string = '';\n  private error: string = '';\n\n  private async resetPassword() {\n    if ((this.$refs.form as HTMLFormElement).validate()) {\n      this.error = '';\n      this.success = '';\n      this.loading = true;\n\n      try {\n        const response = await fetch(API_ENDPOINT + '/api/v1/account/password', {\n          body: JSON.stringify({\n            email: this.email,\n          }),\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n          },\n          method: 'post',\n        });\n\n        const json = await response.json();\n\n        if (response.status >= 200 && response.status < 300) {\n          this.success = 'We have send you an email to reset your password.';\n          this.loading = false;\n        } else {\n          if (json.error) {\n            this.error = json.message;\n            this.loading = false;\n          }\n        }\n      } catch (e) {\n        this.error = 'An error occured';\n        this.loading = false;\n      }\n    }\n  }\n}\n"],"sourceRoot":""}]}